let level=0,userClickedPattern=[],gamePattern=[];const buttonColors=["red","blue","green","yellow"];let backgroundMusic,isGameStarted=!1;function nextSequence(){userClickedPattern=[],level++,$("h1").text(`Level ${level}`),$("h1").removeClass("before after"),$("h1").css({animation:"none","-webkit-animation":"none","-moz-animation":"none","-o-animation":"none"}),$("h1").css({animation:"none","-webkit-animation":"none","-moz-animation":"none","-o-animation":"none"}),$(".btn").css({animation:"none","-webkit-animation":"none","-moz-animation":"none","-o-animation":"none"});let n=Math.floor(Math.random()*buttonColors.length),e=buttonColors[n];gamePattern.push(e),$(`#${e}`).fadeOut(100).fadeIn(100),playSound(e)}function playSound(n){new Audio(`assets/sounds/${n}.mp3`).play()}function animatePress(n){$(`#${n}`).addClass("pressed"),setTimeout((function(){$(`#${n}`).removeClass("pressed")}),100)}function checkAnswer(n){userClickedPattern[n]===gamePattern[n]?userClickedPattern.length===gamePattern.length&&setTimeout(nextSequence,1e3):($("h1").text("Press Any Key to Restart"),$("h1").addClass("before after no-animation-delay"),$("h1").css({animation:"pulse 1.5s infinite","-webkit-animation":"pulse 1.5s infinite","-moz-animation":"pulse 1.5s infinite","-o-animation":"pulse 1.5s infinite","animation-delay":"0.75s"}),$(".btn").css({animation:"button-glow 1.5s ease-in-out infinite","-webkit-animation":"button-glow 1.5s ease-in-out infinite","-moz-animation":"button-glow 1.5s ease-in-out infinite","-o-animation":"button-glow 1.5s ease-in-out infinite"}),$("body").addClass("try-again"),setTimeout((function(){$("body").removeClass("try-again")}),250),new Audio("assets/sounds/wrong.mp3").play(),restart())}function restart(){const n=document.querySelector("#container"),e=document.querySelector(".buttons");isGameStarted=!1,e.style.animation="glitch-effect 1s",$(document).one("keypress",(function(){level=0,userClickedPattern=[],gamePattern=[],n.style.animation="",e.style.animation="",isGameStarted=!0,nextSequence()}))}setTimeout((function(){$("h1").addClass("before after")}),2250),$(".btn").click((function(){if(isGameStarted){let n=this.id;userClickedPattern.push(n),animatePress(n),playSound(n),checkAnswer(userClickedPattern.length-1)}})),$(document).one("keypress",(function(){isGameStarted=!0,nextSequence()}));let isPlaying=!1,currentTime=0;function toggleBackgroundMusic(){isPlaying?pauseBackgroundMusic():startBackgroundMusic(),isPlaying=!isPlaying}function startBackgroundMusic(){backgroundMusic=new Audio("assets/sounds/background-music.mp3"),backgroundMusic.loop=!0,backgroundMusic.volume=1,backgroundMusic.currentTime=currentTime,backgroundMusic.play(),updateBackgroundMusicButtonText("Pause Music")}function pauseBackgroundMusic(){currentTime=backgroundMusic.currentTime,backgroundMusic.pause(),updateBackgroundMusicButtonText("Play Music")}function updateBackgroundMusicButtonText(n){document.getElementById("backgroundMusicButton").textContent=n}document.getElementById("backgroundMusicButton").addEventListener("click",toggleBackgroundMusic);
